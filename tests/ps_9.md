---
sources:
  - "[[ps-9.pdf]]"
  - "[[משתני דמה]]"
---
## שאלה 1
### (א)
$$
\ln(hwage) = \beta_{0} + \beta_{1} hasDone  + u
$$
הסבר: $\beta_{0}$ הוא לוג השכר הממוצע עבור פרט שנשר, $\beta_{1}$ הוא התוספת הצפויה (או הפחתה) בשכר הממוצע למי שלא נשר.

### (ב)
חד משמעית כן. סביר להניח שהפער בלוג השכר מוסבר חלקית על ידי ההשכלה. מאחר ויש מתאם בין מספר שנות לימוד לבין הבחירה האם לנשור או לא, זה מהווה הפרה להנחה מספר 4, והאומד $\beta_{1}$ מוטה כלפי מעלה. 

מודל מתוקן:
$$
\ln(hwage) = \beta_{0}+ \beta_{1}hasDone + \beta_{2}educ + u
$$

## שאלה 2
אם כל -$D_{i}=0$ אז האוכלוסיה היא גברים ללא השכלה גבוה, נוסף על כך, אם $D_{1}$ אז בהכרח $\not D_{2},\; \not D_{3}$ , מכאן שנרצה לבדוק האם התשואה להשכלה עבור גברים משכילים $\beta_{3}$ שווה לתשואה להשכלה עבור נשים משכילות $\beta_{1}$ בהנתן ניסיון: $\exp+\exp ^{2}$ . על כן, התשובה היא ב.


## שאלה 3
```R
[1] "Moodel 1:"
Coefficients:
            Estimate Std. Error t value             Pr(>|t|)    
(Intercept) 2.774569   0.039412   70.40 < 0.0000000000000002 ***
schooly     0.069751   0.002741   25.45 < 0.0000000000000002 ***
---
[1] "Model 2:"
Coefficients:
            Estimate Std. Error t value             Pr(>|t|)    
(Intercept) 3.117397   0.021980  141.83 < 0.0000000000000002 ***
diploma     0.183618   0.005756   31.90 < 0.0000000000000002 ***
---
[1] "model 3:"
Coefficients:
            Estimate Std. Error t value             Pr(>|t|)    
(Intercept)  3.37543    0.02719 124.148 < 0.0000000000000002 ***
hs           0.14863    0.03369   4.411           0.00001057 ***
bg           0.23933    0.03296   7.262      0.0000000000005 ***
post         0.37314    0.03534  10.559 < 0.0000000000000002 ***
ba           0.66023    0.03355  19.678 < 0.0000000000000002 ***
ma           0.94674    0.03935  24.059 < 0.0000000000000002 ***
phd          1.24952    0.08964  13.939 < 0.0000000000000002 ***
---
```

### (א)
```R
coef_m1 <- coef(model1)["schooly"] 
coef_ba <- coef(model3)["ba"] 
coef_bg <- coef(model3)["bg"] 
  
gap_m1 <- coef_m1 * 15 - coef_m1 * 12 
gap_m3 <- coef_ba - coef_bg 
  
cat("gap for model 1: ", gap_m1, "\ngap for model 3: ", gap_m3)

---
gap for model 1:  0.209254 
gap for model 3:  0.42089
```

**הסבר לתוצאה:** במודל הראשון, יש ניסיון לכפות השפעה לינארית של שנות הלימוד על לוג השכר, ומאחר שסביר להניח שככל ששנות ההשכלה גדולות יותר ההשפעה על לוג השכר קטנה יותר עד כדיי לא קיימת, המודל צריך לפצות על זה על ידי הקטנת השיפוע לאורך כל המודל. לעומת זאת, המודל השלישי מאפשר לחשב את השכר הממוצע באופן מבודד עבור כל קטגוריה.

### (ב)
```R
gap_m1 <- coef_m1 * 22 - coef_m1 * 15
gap_m3 <- coef(model3)["phd"] - coef_ba
cat("gap for model 1: ", gap_m1, "\ngap for model 3: ", gap_m3)

---
gap for model 1:  0.488259 
gap for model 3:  0.589298
```

**הסבר לתוצאה:**
במודל הראשון, המודל כופה קצב עליה קבוע (ליניארי) עבור כל שנת לימוד, ומניח שהתרומה של שנת לימוד בדוקטורט זהה לתרומה של שנת לימוד ביסודי, ולכן הפער מחושב פשוט כהכפלת המקדם ב-7 שנים. לעומת זאת, המודל השלישי לא מוגבל על ידי שיפוע אחיד ומחשב את השכר הממוצע של קבוצת הדוקטורנטים באופן מבודד. כך הוא מצליח לתפוס את ה"קפיצה" הגדולה בשכר שקיימת בפועל אצל בעלי התואר הגבוה (בין אם בגלל התעודה עצמה ובין אם בגלל שזו אוכלוסייה מבוגרת יותר), שהמודל הליניארי מפספס וממתן כלפי מטה.

### (ג)
- כפי שהוסבר בסעיפי א,ב - ניתן להסביר את ההבדל בתוצאה על ידי כך שהמודל הראשון מתייחס למספר שנות מודד את מספר שנות הלימוד, בעוד המודל השלישי מודד את רמת ההכשרה. 
- ההנחה הסמויה במודל 1 היא שבן אדם שלמד כ-12 שנים בהכרח סיים עם תעודת בגרות, ובן אדם שלמד כ-15 שנים בהכרח סיים תואר ראשון
- הקשר בין השכלה לשכר מוסבר יותר טוב על ידי מודל 3, מכיוון שהוא מסתכל על רמת ההשכלה שיש לבן אדם - במקום על מספר שנות לימוד. 
### (ד)
- ההנחה הסמויה במודל 2 היא שהשכר עולה ככל שרמת ההשכלה עולה, וזו השערה לאו דווקא נכונה. הכשרה מאוד גבוה (למשל פרופסור) מעידה על בחירה בקריירה באקדמיה, השכר הממוצע של פרופסור צפוי להיות מכובד, אך לאו דווקא גבוה משכר ממוצע של בן אדם עם תואר ראשון ו-20 שנות ניסיון בתעשייה.
### (ה)
$$
\begin{cases}
H_{0}: \alpha_{i} - i \cdot \alpha_{1} = 0 & \forall i\leq 2 \leq 6 \\
H_{1}:  H_{0}  \text{ is false}
\end{cases} 
$$

נשים לב שהמודל המוגבל הוא בעצם פשוט מודל 2. כלומר: 
$$
R: model_{2}, \; U: mo d el_{3}
$$
ונקבע את הפרמטרים: $d=5,n=3612,df=3606$ 
מבחן $f$:
$$
f = \frac{(ESS_{R}-ESS_{U})/ 5}{ESS_{U} / 3606}
$$
```R
ess_r <- sum(resid(model2)^2)
ess_u <- sum(resid(model3)^2)
d <- 5
df <- 3606

f_val <- ((ess_r - ess_u) / d ) / (ess_u / (df))
print(f_val)

---
12.1135
```

מסקנה: דוחים את $H_{0}$ - לוג השכר אינו לינארי עם סוג הדיפלומה.

## שאלה 4
### (א)
$$
\ln hwage = \beta_{0} + \beta_{1}male + \varepsilon
$$
```R
Coefficients:
            Estimate Std. Error t value            Pr(>|t|)    
(Intercept)  3.67505    0.00701   524.4 <0.0000000000000002 ***
male         0.15227    0.01000    15.2 <0.0000000000000002 ***
```
הפער בלוג השכר הממוצע בין גברים לנשים הוא 15%.

### (ב)
$$
\ln hwage= \beta_{0}+ \beta_{1}male + \beta_{2}age+\varepsilon
$$
```R
Coefficients:
            Estimate Std. Error t value            Pr(>|t|)    
(Intercept)  3.51535    0.01034   340.0 <0.0000000000000002 ***
male         0.15365    0.00986    15.6 <0.0000000000000002 ***
age35-44     0.21417    0.01287    16.6 <0.0000000000000002 ***
age45-54     0.22820    0.01366    16.7 <0.0000000000000002 ***
age55-64     0.23807    0.01478    16.1 <0.0000000000000002 ***
---
```
כפי שניתן לראות, הפער נותר כמעט זהה לגמרי. 

### (ג)
$$
\ln hwage = \beta_{0}+\beta_{1}male + \beta_{2}age+\beta_{3}schooly + \varepsilon
$$
```R
Coefficients:
            Estimate Std. Error t value            Pr(>|t|)    
(Intercept)  2.39807    0.02084   115.0 <0.0000000000000002 ***
male         0.17328    0.00884    19.6 <0.0000000000000002 ***
age35-44     0.21830    0.01153    18.9 <0.0000000000000002 ***
age45-54     0.25185    0.01225    20.6 <0.0000000000000002 ***
age55-64     0.26950    0.01325    20.3 <0.0000000000000002 ***
schooly      0.07752    0.00130    59.9 <0.0000000000000002 ***
---
```
ניתן לראות שבהנתן השכלה, הפער דווקא גדול יותר. הסבר: נשים יותר משכילות בממוצע, לכן כאשר שולטים על ההשכלה, רואים שהפער בשכר הוא 17%.

### (ד)
$$
\ln hwage = \beta_{0} + \beta_{1}male + \beta_{2}age + \beta_{3}schooly + \beta_{4} single + \beta_{5} (si ngle \cdot male) +\varepsilon
$$

```R
(Intercept)  2.45853    0.02137  115.02 < 0.0000000000000002 ***
male         0.19576    0.00960   20.40 < 0.0000000000000002 ***
age35-44     0.16640    0.01216   13.69 < 0.0000000000000002 ***
age45-54     0.19263    0.01302   14.80 < 0.0000000000000002 ***
age55-64     0.20766    0.01402   14.81 < 0.0000000000000002 ***
schooly      0.07715    0.00129   59.87 < 0.0000000000000002 ***
single      -0.10111    0.01798   -5.62          0.000000019 ***
male:single -0.11674    0.02411   -4.84          0.000001300 ***
```

הפער בין גברים לנשים בהנתן השכלה גיל ובהנתן שלא רווקים:
$$
\beta_{1} = 19.5\%
$$
כאשר מדובר על רווקים, לוג השכר הממוצע בהנתן שאר הפרמטרים הוא:
$$
\mathbb{E}[\ln hwage | \text{single and female}, rest] = \beta_{0}+\beta_{4} 
$$
$$
\mathbb{E}[\ln hwage | \text{single and male}, rest] = \beta_{0}+\beta_{1} + \beta_{4}+\beta_{5}
$$
נבדוק את הפער בין משוואה 2 ל-1
$$
gap = \beta_{1}+\beta_{5}= 0.195-0.11 = 0.184 \approx 18\%
$$
**הסבר**: בקרב הרווקים, הפער מצתמצם במעט, סיבות אפשריות הן למשל - נשים רווקות כולל גם את הגרושות, נשים גרושות חייבות לעבוד הרבה וקשה כדיי לפרנס את הילדים, לעומת זאת הרבה גברים רווקים הם ללא ילדים, ואין להם צורך לעבוד קשה. מה שבסופו של דבר גורם לשכר השעתי הממוצא להתקרב בין 2 המינים. 



## שאלה 5
```R
data <- read.csv("census_83_95.csv")
colnames(data)
data <- data %>%
  filter(
    female == 0
  ) %>%
  mutate(
    feram95 = ifelse(year == 95 & feram == 1,1,0),
    year95 = ifelse(year == 95, 1,0)
  )
head(data)

model <- lm(ln_wage_hr ~ feram + year95 + feram95, data = data)
---

Coefficients:
            Estimate Std. Error t value
(Intercept)  3.21012    0.00537   597.9
feram        0.34220    0.00782    43.8
year95       0.19206    0.00798    24.1
feram95     -0.03072    0.01184    -2.6
                       Pr(>|t|)    
(Intercept) <0.0000000000000002 ***
feram       <0.0000000000000002 ***
year95      <0.0000000000000002 ***
feram95                  0.0095 ** 
---
```

### (א): 
- ‏ $\beta_{0}$: לוג השכר (השעתי) הצפוי לגבר מזרחי בשנת 83
- ‏ $\beta_{1}$: הפער בלוג השכר בין גבר אשכנזי לגבר מזרחי בשנת 83
- ‏ $\beta_{2}$: הפער בלוג השכר של גבר מזרחי בין השנה 95 ל-83
- ‏ $\beta_{3}$: השינוי בפער בלוג השכר בין מזרחי לאשכנזי בשנת 95 לעומת שנת 83. 
### (ב):
כפי שציינו בסעיף א, המקדם $\beta_{3}$ מייצג את השינוי בפער העדתי בין השנים 95 ל-83. ננסח השערה ונבחן באמצעות מבחן $t$ 
$$
\begin{cases}
H_{0}: \beta_{3} = 0 \\
H_{1}: \beta_{3} \neq 0
\end{cases}
$$
על פי תוצאות הריגרסיה, רמת המובהקות לכך ש- $\beta_{3} \neq 0$ היא 0.0095 על כן נדחה את השערת ה-0 ונקבע שאכן היה שינוי בפער. 

### (ג):
כן ניתן לאמוד ללא אומדי OLS מכיוון שלא מחפשים כאן קשר לינארי, אלא רק ממוצעים עבור כל אחד מהקבוצות ואת הפער בינהם:
```R
brown_83 <-  data %>%
  filter(
    year95 == 0,
    feram == 0
  )
white_83 <- data %>%
  filter(
    year95 == 0,
    feram == 1
  )
brown_95 <- data %>%
  filter(
    year95 == 1,
    feram == 0,
  )
white_95 <- data %>%
  filter(
    feram95 == 1
  )


beta0 <- mean(brown_83$ln_wage_hr)
beta1 <- mean(white_83$ln_wage_hr) - beta0
beta2 <- mean(brown_95$ln_wage_hr) - beta0
beta3 <- mean(white_95$ln_wage_hr) - beta2 - beta1 - beta0

cat(beta0, beta1, beta2,beta3)
---
3.21012 0.3422 0.192057 -0.0307188
```

כפי שניתן לראות - התוצאות זהות לאומד ה-OLS.

### (ד)
לא ניתן לחשב את המודל ללא OLS מכיוון שהוא מניח ש-$\beta_{2}$ הוא הפער בממוצע לוג השכר עבור 2 העדות, אך אם ננסה לעשות זאת עם הנתונים שלנו, נקבל 2 $\beta_{2}$ שונים שאמורים להיות זהים - תלוי מול איזה עדה מודדים. על כן, נצתרך להשתמש ב-OLS כדי לקבל הערכה ל-$\beta_{2}$ על בסיס עיקרון min squared error. 


## שאלה 6
נשים לב שהמודל הראשון מאפשר תשואה שונה על כל הפרמטרים לגברים ולנשים. כלומר:
$$
\begin{cases}
\delta_{0} = \beta_{0} \\
\delta_{1}= \beta_{2} \\
\delta_{2}=\beta_{4} \\
\delta_{3} = \beta_{6}
\end{cases}, \;\; \;\begin{cases}
\lambda_{0} = \beta_{0}+\beta_{1} \\
\lambda_{1} = \beta_{2}+ \beta_{3} \\
\lambda_{2} =\beta_{4}+\beta_{5} \\
\lambda_{3} = \beta_{6}
\end{cases}
$$
על כן: הטענה הנכונה היא (א).

## שאלה 7
טענה $A$: נכונה, אם המפעל בבעלות מקומי, אז $\delta_{3},\delta_{4}$ אינם מחושבים מכיוון שהאינפוט שלהם הוא 0. 
טענה $B$: טענה לא נכונה. הסבר: המודל כופה חותך זהה על 2 הקבוצות, על כן הוא לא מודד את האינטרקציה של $D$ עם כל המודל. מכאן שהמודל מטיל מגבלה נוספת על המודל לעומת 2 מודלים נפרדים, וזה גורם לכך ש- $ESS_{model}\geq ESS_{local}+ESS_{foreign}$ 
- טענה $C$: אינה נכונה מכיוון ש- $\delta_{4}$ בכלל מודד תשומה של עבודה. 
